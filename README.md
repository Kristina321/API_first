# API

**API для регистрации и авторизации пользователей** с профилями, включающими персональные данные, документы и места работы.

**Стек:**
- Node.js
- Express.js

## Установка
1. Клонирование репозитория:
`git clone https://github.com/Kristina321/API_first.git` --> `cd API_first`

2. Установка зависимостей:
`npm install`

## Запуск
Development режим
`npm run dev`

## Структура проекта
```
src/
├── db/
├── models/
├── routes/
├── utils/
└── index.js
```
## API Endpoints

- POST /api/users - Создать пользователя;
- POST /api/users/register - Регистрация пользователя;
- POST /api/users/login - Вход в систему;

## Генерация authKey и паролей

### Система безопасности
- **authKey** - основной токен для авторизации API-запросов
- **Пароль** - временный код для первого входа (должен быть изменен после регистрации)

### Алгоритм генерации

#### Формат токенов

*authKey (пример)*
"ABcd12!_XYzw34@_KLmn56#_PQrs78%"

*Пароль (пример)*
"ABcd12!_"

#### Правила генерации
**Структура групп** (для authKey - 4 группы, для пароля - 1 группа):
```
2 заглавные буквы (A-Z)
2 строчные буквы (a-z)
2 цифры (0-9)
2 спецсимвола (!@#$%^&*)
```

**Особенности:**

- Символы в группах перемешиваются случайным образом;
- Допускаются повторения символов в пределах группы;
- Если групп больше 1, то они разделяются нижним подчеркиванием;

## Модели и Валидация
Модели в проекте реализованы в виде функций-конструкторов, которые обеспечивают создание экземпляров конкретных классов (объектов) с обязательной проверкой входящих данных.

**Модель Person (Person.js)**
Модель описывает персональные данные и проверяет наличие следующих обязательных атрибутов:
- Фамилия (surname);
- Имя (name);
- Отчество (middleName);
- Дата рождения (birthDate);
- Телефон (phoneNumber);

**Модель Document (Document.js)**
Модель описывает данные документа, удостоверяющего личность, включает обязательные поля:
- Серийный номер (serialNumber);
- Номер документа (number);
- Дата выдачи (issueDate, тип строка или объект Date);

**Модель WorkPlace (WorkPlace.js)**
Модель описывает организацию или компанию, где работает человек, включая следующие обязательные поля:
- Название организации (workName);
- Рабочий телефон (workPhone);
- Адрес (workAdress);

**Модель User (User.js)**
Модель пользователей наследуется от модели Person и дополнительно принимает следующие данные:
Докумет (document, опционально), представляемый объектом типа Document.
Места работы (workPlaces, массив с объектами типа WorkPlace).
Передаваемые обязательные поля аналогичны модели Person, плюс дополнительная проверка наличия самого объекта данных.

**Утилита валидации (validateRequired.js)**
Эта утилита обеспечивает проверку входных данных по обязательным полям. Она используется во всех конструкторах моделей проекта и предотвращает создание неполных объектов.

## База данных
Проект хранит данные в локальном файле формата *JSON* (db.json), используемом в качестве базы данных. Вся работа с базой данных осуществляется через модуль Node.js.

## Ограничения
Не для production
